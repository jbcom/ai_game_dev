{% extends "base/layout.html" %}

{% block title %}Dashboard - AI Game Development Portal{% endblock %}

{% block content %}
<!-- Compact Hero Section with Engine Selection -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
    <!-- Hero Content -->
    <div class="lg:col-span-2 glass-panel tech-frame rounded-box p-8 relative overflow-hidden">
        <div class="absolute inset-0 opacity-30">
            <img src="/static/assets/banners/masthead.png" 
                 alt="AI Game Development Banner" 
                 class="w-full h-full object-cover rounded-box">
        </div>
        <div class="absolute inset-0 particle-glow opacity-20"></div>
        <div class="relative z-20">
            <div class="flex items-center gap-4 mb-4">
                <img src="/static/assets/logos/main-logo.svg" alt="AI Game Dev" class="w-16 h-16 object-contain glow drop-shadow-lg">
                <div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent drop-shadow-lg">
                        AI Game Development
                    </h1>
                    <p class="text-lg opacity-90 drop-shadow">Create games with AI assistance</p>
                </div>
            </div>
            
            <!-- Engine Selection Gallery -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                {% for engine in engines %}
                <a href="/web/new_project?engine={{ engine }}" 
                   class="relative group cursor-pointer overflow-hidden rounded-xl hover:scale-105 transition-all duration-300 tech-frame">
                    <!-- Engine Panel Image -->
                    <div class="aspect-[4/3] relative">
                        <img src="/static/assets/engine-panels/{{ engine }}.png" 
                             alt="{{ engine|title }} Engine" 
                             class="w-full h-full object-cover rounded-xl">
                        
                        <!-- Overlay gradient for text readability -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent rounded-xl"></div>
                        
                        <!-- Content overlay -->
                        <div class="absolute inset-0 flex flex-col justify-end p-4 text-white">
                            <div class="flex items-center gap-3 mb-2">
                                {% if engine == 'pygame' %}
                                <div class="w-8 h-8 rounded-lg bg-orange-500/90 backdrop-blur-sm flex items-center justify-center text-lg">🐍</div>
                                {% elif engine == 'bevy' %}
                                <div class="w-8 h-8 rounded-lg bg-orange-600/90 backdrop-blur-sm flex items-center justify-center text-lg">🦀</div>
                                {% elif engine == 'godot' %}
                                <div class="w-8 h-8 rounded-lg bg-blue-500/90 backdrop-blur-sm flex items-center justify-center text-lg">🎮</div>
                                {% endif %}
                                <h3 class="font-bold text-lg drop-shadow-lg">{{ engine|title }}</h3>
                            </div>
                            <p class="text-sm opacity-90 drop-shadow mb-2">
                                {% if engine == 'pygame' %}Python 2D Game Development{% elif engine == 'bevy' %}Rust ECS Engine{% elif engine == 'godot' %}Visual Scripting Platform{% endif %}
                            </p>
                            <div class="group-hover:text-primary transition-colors text-sm font-medium drop-shadow">
                                Start Creating →
                            </div>
                        </div>
                        
                        <!-- Hover glow effect -->
                        <div class="absolute inset-0 rounded-xl ring-2 ring-transparent group-hover:ring-primary/50 transition-all duration-300"></div>
                    </div>
                </a>
                {% endfor %}
            </div>
            
            <!-- Quick Actions -->
            <div class="flex flex-wrap gap-2">
                <a href="/web/new_project" class="btn custom-button btn-sm">🚀 New Project</a>
                <a href="/web/projects" class="btn btn-outline btn-sm">📁 My Projects</a>
                <a href="/web/engines" class="btn btn-ghost btn-sm">⚙️ Learn More</a>
            </div>
        </div>
    </div>
    
    <!-- Stats & Activity Sidebar -->
    <div class="space-y-4">
        <!-- Compact Stats -->
        <div class="glass-panel tech-frame p-4 rounded-box">
            <h3 class="font-bold mb-3 text-center">📊 Platform Stats</h3>
            <div class="grid grid-cols-1 gap-3">
                <div class="text-center">
                    <div class="text-2xl font-bold text-primary">{{ engines|length }}</div>
                    <div class="text-xs opacity-70">Engines</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-secondary">{{ stats.projects_generated or 0 }}</div>
                    <div class="text-xs opacity-70">Projects</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-accent">{{ stats.assets_created or 0 }}</div>
                    <div class="text-xs opacity-70">Assets</div>
                </div>
            </div>
        </div>
        
        <!-- Recent Activity -->
        <div class="glass-panel tech-frame p-4 rounded-box">
            <h3 class="font-bold mb-3">📈 Recent Activity</h3>
            {% if recent_projects %}
                <div class="space-y-2">
                    {% for project in recent_projects[:3] %}
                    <div class="flex justify-between items-center text-sm">
                        <span class="truncate">{{ project.name }}</span>
                        <span class="text-xs opacity-70">{{ project.engine }}</span>
                    </div>
                    {% endfor %}
                </div>
                {% if recent_projects|length > 3 %}
                <div class="text-center mt-2">
                    <a href="/web/projects" class="text-xs opacity-70 hover:opacity-100">View all →</a>
                </div>
                {% endif %}
            {% else %}
                <div class="text-center py-4">
                    <div class="text-2xl mb-2">🎮</div>
                    <p class="text-sm opacity-70">No projects yet</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Compact Feature Overview -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="glass-panel tech-frame p-4 text-center">
        <div class="text-2xl mb-2">🤖</div>
        <h3 class="font-bold text-sm">AI-Powered</h3>
        <p class="text-xs opacity-70">Multi-LLM generation</p>
    </div>
    <div class="glass-panel tech-frame p-4 text-center">
        <div class="text-2xl mb-2">⚡</div>
        <h3 class="font-bold text-sm">Real-time</h3>
        <p class="text-xs opacity-70">Live generation feedback</p>
    </div>
    <div class="glass-panel tech-frame p-4 text-center">
        <div class="text-2xl mb-2">🎨</div>
        <h3 class="font-bold text-sm">Asset Generation</h3>
        <p class="text-xs opacity-70">Images, sounds, music</p>
    </div>
    <div class="glass-panel tech-frame p-4 text-center">
        <div class="text-2xl mb-2">📱</div>
        <h3 class="font-bold text-sm">Multi-Platform</h3>
        <p class="text-xs opacity-70">Web, desktop, mobile</p>
    </div>
</div>
{% endblock %}